#include "bh1750.h"

void BH_DateSend(u8 command)
{
    do{
    IIC_Start();                      //起始信号
    IIC_Send_Byte(BHAddWrite);       //发送写入数据器件的地址
    }while(IIC_Wait_Ack());           //等待应答
    IIC_Send_Byte(command);          //发送命令
    IIC_Wait_Ack();                   //等待应答
    IIC_Stop();                       //终止信号
} 

u16 BH_DateRead(void)
{
	u16 buf;
	IIC_Start();                       //开始信号
	IIC_Send_Byte(BHAddRead);         //发送读取数据器件的地址
	IIC_Wait_Ack();                     //等待应答
	buf=IIC_Read_Byte(1);              //读取数据
	buf=buf<<8;                        //读取并保存高八位数据
	buf+=0x00ff&IIC_Read_Byte(0);      //读取并保存第八位数据
	IIC_Stop();                        //终止信号
	return buf; 
}